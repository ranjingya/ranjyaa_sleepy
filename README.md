# ranjyaa_sleepy

ä¼¼äº†æ²¡ï¼Œå¦‚ä¼¼ðŸŽ‰  
åœ¨çº¿æ¼”ç¤ºåœ°å€ï¼š[æ´»ç€å—ï¼Ÿå¦‚æ´»](http://ranjyaa-alive.ranjyaa.top/)  
è¿™é‡Œæ˜¯åŽç«¯ä»£ç ï¼Œå‰ç«¯ä»£ç åœ¨[è¿™é‡Œ]()

# ä»‹ç»

> æ„Ÿè°¢[èŠ¥å­](https://github.com/1812z/sleepy)æä¾›çš„çµæ„Ÿ


ä½¿ç”¨Flask+SocketIOå®žçŽ°çš„ä¸€ä¸ªå®žæ—¶ç›‘æŽ§ç”µè„‘å½“å‰çª—å£æ ‡é¢˜çš„å°å·¥å…·ï¼Œå¯ä»¥é€šè¿‡ç½‘é¡µå®žæ—¶æŸ¥çœ‹ç”µè„‘å½“å‰çª—å£çš„æ ‡é¢˜ä¿¡æ¯ï¼Œç”¨äºŽç›‘æŽ§æˆ‘ä¼¼äº†æ²¡ï¼ˆï¼‰

![img.png](img.png)

# æ ¸å¿ƒæ–‡ä»¶

- service.pyï¼šæœåŠ¡ç«¯ä»£ç ï¼Œè´Ÿè´£æŽ¥æ”¶å®¢æˆ·ç«¯ï¼ˆwinã€mobileï¼‰å‘é€æ¥çš„çª—å£æ ‡é¢˜ä¿¡æ¯ç­‰ï¼Œé€šè¿‡socketå®žæ—¶å‘é€ç»™å‰ç«¯é¡µé¢

- watch_win.pyï¼šå®¢æˆ·ç«¯ä»£ç ï¼Œè´Ÿè´£ç›‘æŽ§ç”µè„‘è¡Œä¸ºï¼ŒèŽ·å–å½“å‰çª—å£çš„æ ‡é¢˜ä¿¡æ¯ï¼Œé€šè¿‡httpè¯·æ±‚å‘é€ç»™æœåŠ¡ç«¯

- logger_config.pyï¼šæ—¥å¿—é…ç½®æ–‡ä»¶

- gun.pyï¼šå¯åŠ¨æœåŠ¡ç«¯å®¹å™¨çš„é…ç½®

# ä½¿ç”¨æ–¹æ³•

å¼ºçƒˆå»ºè®®ä½¿ç”¨å•ç‹¬çš„è™šæ‹ŸçŽ¯å¢ƒè¿è¡Œï¼ï¼å¦‚condaç­‰

1. å®‰è£…ä¾èµ–  
   æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ‰€ç”¨åˆ°çš„ä¾èµ–ä¸ä¸€æ ·ï¼Œéœ€è¦åˆ†åˆ«å®‰è£…ã€‚å¦‚æžœéƒ½åœ¨æœ¬åœ°è¿è¡Œåˆ™éƒ½éœ€è¦å®‰è£…ã€‚  
   åˆ†åˆ«è¿›å…¥åˆ°å¯¹åº”æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤

    ```shell
    pip install -r requirements.txt
    ```

2. ä¿®æ”¹service.pyä¸­çš„ç›¸å…³é…ç½®åŽï¼Œå¯åŠ¨å‘½ä»¤

    ```shell
    python service.py
    ```

1. ä¿®æ”¹watch_win.pyä¸­çš„ç›¸å…³é…ç½®åŽï¼Œå¯åŠ¨å‘½ä»¤

    ```shell
    python watch_win.py
    ```

> å¦‚æœ‰éœ€è¦ï¼Œå¯ä»¥ç”¨dockeræ‰“åŒ…æœåŠ¡ç«¯ä»£ç ï¼Œç„¶åŽæ‰”åˆ°æœåŠ¡å™¨ä¸Šè¿è¡Œã€‚ä½¿ç”¨ç”Ÿäº§çŽ¯å¢ƒçš„æœåŠ¡å™¨å®¹å™¨gunicornå¯åŠ¨æ›´åŠ ç¨³å®š

# å…¶ä»–é—®é¢˜

1. å¯åŠ¨service.pyæ—¶æŠ¥é”™ï¼š
   ```
   RuntimeError: The Werkzeug web server is not designed to run in production. Pass allow_unsafe_werkzeug=True to the run() method to disable this error.
   ```  

- åŽŸå› ï¼š  
  Flaskè‡ªå¸¦çš„æœåŠ¡å™¨ä¸é€‚åˆåœ¨ç”Ÿäº§çŽ¯å¢ƒä¸­ä½¿ç”¨ï¼Œéœ€è¦åœ¨å¯åŠ¨æœåŠ¡çš„æ—¶å€™åŠ ä¸Š`allow_unsafe_werkzeug=True`å‚æ•°
- è§£å†³ï¼š  
  `service.py`çš„æœ€åº•éƒ¨ä¿®æ”¹ä¸º`socketio.run(app, host="0.0.0.0", port=5002, allow_unsafe_werkzeug=True)`

# åŽè¨€

å®‰å“ç«¯çš„ç›‘æŽ§ä»£ç è¿˜æ²¡å†™ã€‚å¯ä»¥å‚è€ƒ[èŠ¥å­](https://github.com/1812z/sleepy)çš„ä»“åº“
> è¿™aiç¬‘æ­»æˆ‘äº†  
![img_1.png](img_1.png)